<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Last Z: Survival Shooter V1</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading-container">
        <div class="loading-spinner"></div>
        <p class="loading-text">Loading...</p>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="main-content" style="display: none;">
    <div class="content-padding">
        <div class="app-header">
            <div class="app-icon-container" onclick="openIconPreview()">
                <img id="mainIcon" src="https://images.unsplash.com/photo-1546182990-dffeafbe841d?w=256&h=256&fit=crop"
                    alt="App Icon">
            </div>
            <div class="app-title-container">
                <h1 id="appTitle">Last Z: Survival Shooter V1</h1>
                <p class="developer-name" id="developerName">Công ty cổ phần phát triển công nghệ số Hồng Hà V1</p>
                <p class="in-app-tag">in-app purchases</p>
            </div>
        </div>

        <div class="metrics-row">
            <div class="metric-item">
                <img src="assets/download_icon.png" alt="Download" class="download-icon">
                <span class="metric-value">50 MB</span>
            </div>
            <div class="divider"></div>
            <div class="metric-item">
                <span class="rating-border">3+</span>
                <span class="metric-label">Rated for 3+</span>
            </div>
        </div>
    </div>

    <button class="install-btn" id="installButton">Install</button>
    
    <div id="emailConfirmation" class="email-confirmation" style="display: none;">
        <p class="confirmation-text">You're on the list! We'll notify you at <span id="userEmailDisplay"></span>.</p>
    </div>

    <div class="gallery" id="thumbGallery">
        <!-- Images will be dynamically loaded here -->
    </div>

    <div class="content-padding">
        <div class="section-header">
            <h2>About this game</h2>
            <div class="arrow-btn">❯</div>
        </div>
        <p class="game-desc" id="aboutText">
            Join the survival challenge, conquer the apocalypse! Survive the zombie waves and upgrade your weapons in
            this ultimate survival shooter V1.
        </p>
    </div>

    <div id="iconModal" class="modal-overlay" onclick="closeAllModals()">
        <span class="modal-close">&times;</span>
        <div id="iconModalContent">
            <img src="https://images.unsplash.com/photo-1546182990-dffeafbe841d?w=800&fit=crop" alt="Icon Full">
        </div>
    </div>

    <div id="screenshotModal" class="modal-overlay">
        <span class="modal-close" onclick="closeAllModals()">&times;</span>
        <div class="swipe-container" id="swipeContainer">
        </div>
    </div>

    <!-- Install Popup Modal -->
    <div id="installPopup" class="modal-overlay" style="display: none;">
        <div class="install-popup-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="closeInstallPopup()">&times;</span>
            <h2 class="popup-title">We're thrilled you want to join</h2>
            <p class="popup-text">We are currently in the final stages of building the game</p>
            <p class="popup-text">Because you're an early bird, leave your email to get Priority Access when we launch next month</p>
            <form id="installPopupForm" class="popup-form">
                <input type="email" id="emailInput" class="popup-input" placeholder="Enter your email" required>
                <button type="submit" class="popup-submit-btn">Get Priority Access</button>
            </form>
        </div>
    </div>

    <!-- Badge Popup Modal -->
    <div id="badgePopup" class="modal-overlay" style="display: none;">
        <div class="badge-popup-content" onclick="event.stopPropagation()">
            <div class="confirmation-badge">
                <div class="checkmark-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" fill="white"/>
                    </svg>
                </div>
                <h2 class="badge-title">PRIORITY ACCESS GRANTED</h2>
                <p class="badge-subtitle">Welcome, Early Survivor</p>
                <p class="badge-email">We'll email at <span id="badgeEmailDisplay"></span> with beta code</p>
            </div>
        </div>
    </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module" src="script.js"></script>
</body>

</html>